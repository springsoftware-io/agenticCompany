# QA Agent Documentation

## Overview

The **QA Agent** is an autonomous quality assurance system that monitors your AutoGrow project's health by reviewing issues, pull requests, and commits every 20 minutes.

## What It Does

### Automated Monitoring
- ğŸ” **Reviews recent issues** - Checks for stale, duplicate, or improperly labeled issues
- ğŸ”€ **Analyzes pull requests** - Identifies unmerged PRs, review delays, or quality concerns
- ğŸ“ **Examines commits** - Validates commit messages and change patterns
- ğŸ¥ **Assesses project health** - Overall project status and AI agent performance

### Smart Reporting
- âœ… **Healthy**: Everything looks good, no action needed
- âš ï¸ **Warning**: Minor issues detected, creates issue for review
- ğŸ”´ **Critical**: Serious problems found, creates high-priority issue

## How It Works

```
Every 20 Minutes
â”œâ”€ 1. Gather Context
â”‚   â”œâ”€ Last 10 issues
â”‚   â”œâ”€ Last 5 pull requests
â”‚   â””â”€ Last 10 commits
â”‚
â”œâ”€ 2. AI Analysis (Claude)
â”‚   â”œâ”€ Identify problems
â”‚   â”œâ”€ Categorize by severity
â”‚   â””â”€ Generate recommendations
â”‚
â””â”€ 3. Take Action
    â”œâ”€ Log findings
    â””â”€ Create issue if problems found
```

## What It Checks

### 1. Code Quality
- Unmerged PRs that should be merged
- PRs with excessive changes
- Poor commit messages
- Code review delays

### 2. Process Issues
- Missing or incorrect labels
- Duplicate issues
- Stale issues/PRs
- Workflow failures

### 3. Project Health
- AI agents functioning correctly
- Project progressing as expected
- No blocking issues
- Good development velocity

### 4. Security & Performance
- Security concerns mentioned in issues
- Performance problems
- Dependency issues
- Configuration problems

## Issue Format

When problems are detected, the QA Agent creates an issue like this:

```markdown
# âš ï¸ QA Agent Report - WARNING

**Summary:** Found 2 stale PRs and 1 duplicate issue

**Scan Date:** 2025-11-13 17:00:00 UTC

---

## ğŸ” Problems Detected

### ğŸŸ  Problem 1: Stale Pull Request #42

**Severity:** MEDIUM
**Category:** process

**Description:**
PR #42 has been open for 7 days without review or merge

**Recommendation:**
Review and merge or close this PR to maintain project velocity

---

### ğŸŸ¡ Problem 2: Duplicate Issue

**Severity:** LOW
**Category:** process

**Description:**
Issues #15 and #18 appear to be duplicates

**Recommendation:**
Close one issue as duplicate and consolidate discussion

---

## âœ… Positive Observations

- All recent commits have clear, descriptive messages
- Issue response time is excellent (< 1 hour average)
- Test coverage is improving

---

*Generated by QA Agent*
```

## Configuration

### Environment Variables

```yaml
# In .github/workflows/qa-agent.yml

MAX_ISSUES_TO_REVIEW: 10      # Number of recent issues to analyze
MAX_PRS_TO_REVIEW: 5          # Number of recent PRs to analyze
MAX_COMMITS_TO_REVIEW: 10     # Number of recent commits to analyze
```

### Schedule

Default: Every 20 minutes
```yaml
schedule:
  - cron: '*/20 * * * *'
```

Adjust as needed:
- Every 30 minutes: `'*/30 * * * *'`
- Every hour: `'0 * * * *'`
- Every 2 hours: `'0 */2 * * *'`

## Labels Used

The QA Agent applies these labels to issues it creates:

- `qa-report` - All QA-generated issues
- `priority-high` - Critical problems
- `priority-medium` - Warning-level problems
- `security` - Security-related concerns
- `code_quality` - Code quality issues
- `process` - Process/workflow issues
- `health` - Project health concerns

## Example Scenarios

### Scenario 1: Healthy Project
```
ğŸ“Š QA Status: HEALTHY
ğŸ“ Summary: All systems operating normally

âœ… Positive Observations:
   âœ“ All PRs reviewed within 24 hours
   âœ“ No stale issues
   âœ“ Commit messages are clear and descriptive
   âœ“ AI agents generating quality code

âœ… No problems found - repository health looks good!
```

### Scenario 2: Warning Detected
```
ğŸ“Š QA Status: WARNING
ğŸ“ Summary: Found 1 stale PR and 2 unlabeled issues

âš ï¸  Found 3 problem(s):

   ğŸŸ  Problem 1: Stale Pull Request
      Severity: medium | Category: process
      PR #45 has been open for 5 days without activity
      ğŸ’¡ Recommendation: Review and merge or request changes

   ğŸŸ¡ Problem 2: Unlabeled Issue
      Severity: low | Category: process
      Issue #23 has no labels
      ğŸ’¡ Recommendation: Add appropriate labels

ğŸ“ Creating QA issue for warning status...
âœ… Created QA issue #50: QA Report: Found 1 stale PR and 2 unlabeled issues
```

### Scenario 3: Critical Issues
```
ğŸ“Š QA Status: CRITICAL
ğŸ“ Summary: Security vulnerability detected in dependencies

âš ï¸  Found 2 problem(s):

   ğŸ”´ Problem 1: Security Vulnerability
      Severity: high | Category: security
      Issue #47 reports critical security vulnerability
      ğŸ’¡ Recommendation: Address immediately

   ğŸ”´ Problem 2: Workflow Failure
      Severity: high | Category: health
      Issue resolver workflow failing for 3 consecutive runs
      ğŸ’¡ Recommendation: Debug and fix workflow

ğŸ“ Creating QA issue for critical status...
âœ… Created QA issue #51: QA Report: Security vulnerability detected
```

## Manual Trigger

You can manually trigger the QA Agent:

```bash
# Via GitHub CLI
gh workflow run qa-agent.yml

# Via GitHub UI
Actions â†’ QA Agent â†’ Run workflow
```

## Integration with Other Agents

The QA Agent works alongside:

- **Issue Generator** - QA can create issues even if max issues exist
- **Issue Resolver** - QA issues can be picked up and resolved
- **Your Review** - QA provides insights for your review process

## Benefits

### 1. Continuous Monitoring
- Never miss important issues
- Catch problems early
- Maintain project health

### 2. Automated Quality Control
- No manual QA needed
- Consistent standards
- Objective analysis

### 3. Proactive Problem Detection
- Find issues before they become critical
- Identify patterns and trends
- Improve development process

### 4. Peace of Mind
- Know your project is being watched
- Get alerts when needed
- Focus on high-value work

## Customization

### Adjust Sensitivity

Make QA more or less strict by modifying the prompt in `qa_agent.py`:

```python
# More strict
prompt += "Be very thorough and flag even minor issues."

# Less strict
prompt += "Only flag significant problems that need immediate attention."
```

### Custom Checks

Add custom checks by extending the prompt:

```python
prompt += """
## Custom Checks
- Verify all PRs have tests
- Check documentation is updated
- Ensure changelog is maintained
"""
```

### Custom Actions

Modify `create_qa_issue()` to:
- Send notifications (Slack, email)
- Update project boards
- Trigger other workflows
- Generate reports

## Troubleshooting

### QA Agent Not Running

Check:
1. Workflow is enabled (Actions tab)
2. Secrets are set (ANTHROPIC_API_KEY, PAT_TOKEN)
3. No workflow errors (Actions â†’ QA Agent)

### Too Many/Few Issues Created

Adjust:
- Review frequency (cron schedule)
- Severity thresholds in prompt
- Number of items reviewed

### False Positives

- Review QA issue and close if not valid
- Adjust prompt to be more specific
- Add context to help AI understand better

## Best Practices

1. **Review QA Issues Promptly** - Don't let them pile up
2. **Adjust Frequency** - Find the right balance for your project
3. **Customize Checks** - Tailor to your specific needs
4. **Monitor Trends** - Look for patterns in QA reports
5. **Iterate** - Improve the QA agent based on feedback

## Future Enhancements

Potential improvements:
- [ ] Trend analysis over time
- [ ] Custom metrics tracking
- [ ] Integration with external tools
- [ ] Automated fixes for simple issues
- [ ] Slack/Discord notifications
- [ ] Weekly summary reports

## Summary

The QA Agent is your autonomous quality guardian:
- ğŸ” Monitors 24/7
- ğŸ¤– AI-powered analysis
- ğŸ“ Automatic reporting
- âš¡ Proactive problem detection

**Set it and forget it. Your project stays healthy automatically.** âœ¨
